小组成员：盛梓航 2300012969，2200012718 周昱名，2100012918 张金涛
### 主要设计框架
设计参考NJU [作业 6：上下文敏感的指针分析 | Tai-e](https://tai-e.pascal-lab.net/pa6.html)

采用 **Anderson** 指向分析，实现了基于克隆方法的 **k-object/call CFA**

##### 核心类和接口
- **Solver**：负责执行指针分析算法
- **PointerFlowGraph**：表示指针流图
- **CSManager**：管理上下文敏感元素和指针，维护多个从上下文敏感元素到指针的映射
- **HeapModel**：表示堆模型，管理堆中的对象（按 `New` 语句抽象）
- **ContextSelector**：负责根据选项创建不同的上下文选择器，用于确定方法调用的上下文

##### 上下文敏感设计
上下文 **Context** 类定义了上下文的数据结构，采用 Trie 树的形式来存储上下文路径。上下文敏感元素（如变量、对象、字段等），由普通的元素及其上下文创建

##### 算法流程
工单算法，不断地更新指针的目标集合并构建控制流图，如下图所示
![[Pasted image 20241201223645.png]]

### 算法优化
##### 流敏感的指针分析
加入了部分的流敏感 **Anderson** 指针分析算法，每次分析都会进行 Flow-Sensitive 和基础分析，视分析的情况选择最后的输出结果（如果都不健壮，返回全集）

| 赋值语句   | 转换函数                                                                                                                                                                                                                                                       |
| ------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `a=&b` | $$f(V)=V[\boldsymbol{a}\mapsto\{b\}]$$                                                                                                                                                                                                                     |
| `a=b`  | $$f(V)=V[\boldsymbol{a}\mapsto\boldsymbol{b}]$$                                                                                                                                                                                                            |
| `a=*b` | $$f(V)=V[\boldsymbol{a}\mapsto\bigcup_{\forall v\in\boldsymbol{b}}\boldsymbol{v}]$$                                                                                                                                                                        |
| `*a=b` | $$f(V)=\left\{\begin{aligned}\forall v\in \boldsymbol{a},V[\boldsymbol{v}\mapsto\boldsymbol{v}\cup\boldsymbol{b}]&&\|\boldsymbol{a}\|>1\\ \forall v\in \boldsymbol{a},V[\boldsymbol{v}\mapsto\boldsymbol{b}]&& \|\boldsymbol{a}\|=1\end{aligned} \right.$$ |

##### 数组扩展
基础版本采用数组粉碎，也即用一个抽象值描述数组中所有元素，后续加入了数组扩展：只针对数组前 $k$ 个变量建立一个变量保存抽象值，提供了一定分析数组的能力

##### Tai-e 自带的分析
调用了一些 **Tai-e** 自带的分析如死代码检测等

### 项目分工
周昱名：项目框架和算法的优化（主要贡献）
盛梓航：基础的代码框架
张金涛：构造测试用例及其他
