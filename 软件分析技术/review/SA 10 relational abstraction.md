##### 非关系抽象
大量的分析是关于变量中有什么值的，这些分析单独对每个变量进行抽象，不考虑变量之间的关系

##### 关系抽象
考虑变量之间关系的抽象称为关系抽象

一种基础关系抽象的表示方式
- 抽象域：一阶逻辑表达式组成的空间
- 抽象值 $c_1$ 和 $c_2$ 的并：$c_1\vee c_2$ 
- 语句的转换函数，如 `x=a+b`
	- $OUT\equiv(\exists x.IN)\wedge x=a+b$
- 条件的压缩函数，如 `x>0`
	- $OUT\equiv IN \wedge x>0$

抽象域无限，也很难定义出widen算子，分析不收敛，并且分析结果是一个巨大的逻辑表达式，难以从中导出（逻辑表达式基本和原程序等价，分析难度几乎没变）

实际中的关系抽象通常限定逻辑约束的形式

### 简单仿射关系抽象
抽象域
- 给定抽象符号集合$\{s_{v,x}\mid v:控制流节点,x:变量名\}$ ，抽象域由$(申，酉)$ 组成
	- 申：从变量到抽象符号线性表达式 $\sum w_{ij}s_{ij}$ 的部分映射
	- 酉：从抽象符号到区间的部分映射，未定义的符号默认为空区间
- 含义：变量之间的关系满足申，且变量的值在基于酉和申计算出的区间内

##### 转换函数

赋值语句 `x=a+b`
$OUT^{申}(x)=IN^{申}(a)+IN^{申}(b)$
$OUT^{申}(x)=IN^{申}(y)\quad \forall y\not=x$
$OUT^{酉}(x)=IN^{酉}(y)$

节点 $v$ 的赋值语句 `x=a*b` （非线性）
$OUT^{申}(x)=s_{vx}$
$OUT^{酉}(s_vx)=根据a和b的区间计算$
其他不变

节点 $v$ 的 $IN$ 计算
$$IN^{申}(x)=\left\{\begin{aligned}e&&如果所有前驱都为𝑒或未定义\\s_{vx}&&否则\end{aligned}\right.$$$$IN^{酉}(s_{ij})=\left\{\begin{aligned}前驱对应区间的并&&i\not=v\\根据前驱对应申和酉计算&&i=v\end{aligned}\right.$$
##### 简单仿射关系性的性质
安全性：简单仿射关系抽象保证安全性
收敛性：$申$是收敛的，可以对$酉$中的区间加上加宽来保证收敛

不足：没有互相赋值的变量，无法建立起关系


### 八边形关系抽象

即 $\pm v_1\pm v_2\leqslant a$，其中 $v_1,v_2\in\{x,y\}$ 

有意义的只有八个值

##### 八边形上的计算
$x=x+1$ ：将 $x$ 有关的八边形沿 $x$ 轴移动 $1$ 个单位
$z=x\cup y$ ：对于任意变量 $v$，令$\langle z,v \rangle$的八边形为包住 $\langle y,v \rangle$和$\langle x,v \rangle$的最小八边形
$z=x\cap y$ ：对于任意变量 $v$，令$\langle z,v \rangle$的八边形为包住 $\langle y,v \rangle$和$\langle x,v \rangle$的公共部分的最小八边形

### 谓词抽象
用一系列布尔表达式的值作为抽象域

需要针对谓词设计转换函数

如，符号分析可以用谓词抽象表达：对任意变量 $x$，有如下谓词 $x>0,x<0,x=0$
