
处理器的设计步骤
1. 分析指令系统，得出对数据通路的需求
2. 为数据通路选择合适的组件
3. 连接组件建立数据通路
4. 分析每条指令的实现，以确定控制信号
5. 集成控制信号，形成完整的控制逻辑

MIPS 指令系统的简化版本：
- 无符号加法和减法
	- `addu rd,rs,rt`
	- `subu rd,rs,rt`
- 立即数的逻辑或
	- `ori rt,rs,imm16`
- 装载和存储一个字（32位）
	- `lw rt,imm16(rs)`
	- `sw rt,imm16(rs)`
- 条件分支
	- `beq rs,rt,imm16`


指令系统的需求：
- 算术逻辑单元（ALU）
	- 运算类型：加、减、或、比较相等
	- 操作数：2个32位的数，来自寄存器或扩展后的立即数
- 立即数扩展部件（Extender）
	- 将一个16立即数扩展为32位数
	- 扩展方式：零扩展、符号扩展
- 程序计数器（PC）
	- 一个32位的寄存器
	- 支持两种加法：加4或**加一个立即数**
- 寄存器堆：两读一写
	- 每个寄存器为32位宽，共32个
	- 支持读操作：rs **和** rt
	- 支持写操作：rt **或** rd
- 存储器：实际对应了 i-cache 和 d-cache
	-  一个只读的指令存储器，地址和数据均为32位
	- 一个可读写的数据存储器，地址和数据均为32位

寄存器堆图示
![[Pasted image 20250316202010.png|350]]

##### 取值令：所有指令的共同需求
顺序执行时 $PC \leftarrow PC + 4$
发生分支时 $PC \leftarrow$ 分支目标的地址
![[Pasted image 20250316202153.png|450]]



##### 完整数据通路
```MIPS
R[rd] = R[rs] op R[rt] // 加减法
R[rt] = R[rs] op ZeroExt[imm16] // 逻辑运算
R[rt] = Mem[R[rs]+SignExt[imm16]] // 访存指令 Load
Mem[R[rs]+SignExt[imm16]] = R[rt] // 访存指令 Store
```

![[Pasted image 20250316203341.png]]

##### 控制信号的集成
集成控制信号，形成完整的控制逻辑
![[Pasted image 20250316204207.png|450]]
![[Pasted image 20250316203652.png|450]]